/**
*
*   SyntaxHighlighterGrammar
*   @version: 4.0.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight brush for SyntaxHighlighter
*   https://github.com/foo123/syntaxhighlighter-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"SyntaxHighlighterGrammar",function(){"use strict";function e(e){var t=0;return null===e?t=ht:!0===e||!1===e||e instanceof Boolean?t=bt:tt===e?t=kt:(t=Dt[lt.call(e)]||mt,t=gt===t||e instanceof Number?isNaN(e)?yt:isFinite(e)?gt:$t:dt===t||e instanceof String?1===e.length?vt:dt:wt===t||e instanceof Array?wt:Ot===t||e instanceof RegExp?Ot:Et===t||e instanceof Date?Et:qt===t||e instanceof Function?qt:_t===t?_t:mt),t}function t(e,t,n,r){var o,s,l,a,i,u,c=e.length;if(arguments.length<4&&(r=c-1),0>r&&(r+=c),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(l=r-n+1,a=15&l,i=1&a,u=new Array(l),i&&(u[0]=t(e[n],n,n,r)),o=i;a>o;o+=2)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r);for(o=a;l>o;o+=16)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r),u[o+2]=t(e[s+2],s+2,n,r),u[o+3]=t(e[s+3],s+3,n,r),u[o+4]=t(e[s+4],s+4,n,r),u[o+5]=t(e[s+5],s+5,n,r),u[o+6]=t(e[s+6],s+6,n,r),u[o+7]=t(e[s+7],s+7,n,r),u[o+8]=t(e[s+8],s+8,n,r),u[o+9]=t(e[s+9],s+9,n,r),u[o+10]=t(e[s+10],s+10,n,r),u[o+11]=t(e[s+11],s+11,n,r),u[o+12]=t(e[s+12],s+12,n,r),u[o+13]=t(e[s+13],s+13,n,r),u[o+14]=t(e[s+14],s+14,n,r),u[o+15]=t(e[s+15],s+15,n,r);return u}function n(e,t,n,r,o){var s,l,a,i,u,c=e.length,p=n;if(arguments.length<5&&(o=c-1),0>o&&(o+=c),arguments.length<4&&(r=0),r>o)return p;if(r===o)return t(p,e[r],r);for(a=o-r+1,i=15&a,u=1&i,u&&(p=t(p,e[r],r)),s=u;i>s;s+=2)l=r+s,p=t(t(p,e[l],l),e[l+1],l+1);for(s=i;a>s;s+=16)l=r+s,p=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(p,e[l],l),e[l+1],l+1),e[l+2],l+2),e[l+3],l+3),e[l+4],l+4),e[l+5],l+5),e[l+6],l+6),e[l+7],l+7),e[l+8],l+8),e[l+9],l+9),e[l+10],l+10),e[l+11],l+11),e[l+12],l+12),e[l+13],l+13),e[l+14],l+14),e[l+15],l+15);return p}function r(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,s,l=n-t+1,a=15&l,i=1&a;for(i&&e(t,r,t,n),o=i;a>o;o+=2)s=t+o,e(s,r,t,n),e(++s,r,t,n);for(o=a;l>o;o+=16)s=t+o,e(s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n);return r}function o(t,n){var r,s,l,a,i=e(t),u=0;if(gt===e(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,_t===i){s={};for(l in t)t[rt](l)&&t[ot](l)&&(r=e(t[l]),_t===r?s[l]=n?o(t[l],u>0?u-1:n):t[l]:wt===r?s[l]=n?o(t[l],u>0?u-1:n):t[l].slice():Et===r?s[l]=new Date(t[l]):dt&r?s[l]=t[l].slice():gt&r?s[l]=0+t[l]:s[l]=t[l])}else if(wt===i)for(a=t.length,s=new Array(a),l=0;a>l;l++)r=e(t[l]),_t===r?s[l]=n?o(t[l],u>0?u-1:n):t[l]:wt===r?s[l]=n?o(t[l],u>0?u-1:n):t[l].slice():Et===r?s[l]=new Date(t[l]):dt&r?s[l]=t[l].slice():gt&r?s[l]=0+t[l]:s[l]=t[l];else s=Et===i?new Date(t):dt&i?t.slice():gt&i?0+t:t;return s}function s(){var t,n,r,l,a,i,u,c,p,f,m=arguments,k=m.length;if(1>k)return null;for(n=o(m[0]),r=1;k>r;r++)if(t=m[r])for(l in t)if(t[rt](l)&&t[ot](l))if(n[rt](l)&&n[ot](l)){if(p=e(n[l]),f=e(t[l]),_t===p&&_t===f)n[l]=s(n[l],t[l]);else if(wt===p&&wt===f){if(u=n[l],c=t[l],i=c.length,!i)continue;if(u.length)for(a=0;i>a;a++)0>u.indexOf(c[a])&&u.push(c[a]);else n[l]=c.slice()}}else n[l]=o(t[l]);return n}function l(t,n){return n||wt!==e(t)?[t]:t}function a(t,n){return t=l(t),(n||wt!==e(t[0]))&&(t=[t]),t}function i(t,n){return dt&e(n)&&dt&e(t)&&n.length&&n.length<=t.length&&n===t.substr(0,n.length)}function u(e,t,n){return n?e[t]=tt:delete e[t],e}function c(e){return(e||"id_")+ ++Pt}function p(e){return(e||"uuid")+"_"+ ++Pt+"_"+(new Date).getTime()}function f(){var t,n,r,o,s,l,a=arguments,i=a.length;for(t=a[0]||{},s=1;i>s;s++)if(n=a[s],_t===e(n))for(o in n)n[rt](o)&&n[ot](o)&&(r=n[o],l=e(r),gt&l?t[o]=0+r:Et&l?t[o]=new Date(r):Lt&l?t[o]=r.slice():t[o]=r);return t}function m(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[rt](o)||(t[o]=function(){}),n=t[o],delete t[o],n[nt]=f(at(e[nt]),t),n[nt][o]=n,n}function k(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":'"'===e?"&quot;":"&apos;"}function h(e){return"&amp;"===e?"&":"&lt;"===e?"<":"&gt;"===e?">":"&quot;"===e?'"':"'"}function g(e){return"&#"+e.charCodeAt(0)+";"}function $(e,t){return e.replace(At,t?k:g)}function y(e){return e.replace(Ct,h)}function b(e){return e.replace(Tt,"\\$1")}function d(e,t){return new RegExp(e,t||"")}function v(e,t,n,r){var o,s,l,a,i=e.pos,u=e.length,c="",p=!!n;if(p){for(r=!!r,s=!1,a=0;u>i&&(o=e[pt](i++),t!==o||s);)l=n===o,s=!s&&l,r?(l&&a++,(!l||2&a)&&(c+=o,a=0)):c+=o;2&a&&(c+=n)}else for(;u>i&&(o=e[pt](i++),t!==o);)c+=o;return e.pos=i,c}function x(t,n,r,o){var s,l,a,i,u,c=!0===r?0:1,p=o?"\\":"$",f=o?92:36;for(dt&e(n)&&(o&&(n=b(n)),n=[n,n,n],c=0),l=t.length,u="",s=0;l>s;)a=t[pt](s),l>s+1&&p===a?(i=t.charCodeAt(s+1),f===i?(u+=p,s+=2):i>=48&&57>=i?(u+=n[c+i-48]||"",s+=2):(u+=a,s+=1)):(u+=a,s+=1);return u}function w(t,n,r,o){if(!t||(gt|Ot)&e(t))return t;var s,l=n?n.length||0:0,a="";if(dt&e(o)?a=o:o&&(a=Ht),l&&n===t.substr(0,l)){var i,u,c,s,p,f=t.substr(l),m=f[pt](0),k="";for(s=f.length;s--&&(p=f[pt](s),m!==p);)"i"===p.toLowerCase()&&(k="i");return i=f.substring(1,s),u="^("+i+")",r[u]||(c=d(u,k),r[u]=c),r[u]}return a?(u="^("+b(t)+")"+a,r[u]||(c=d(u,k),r[u]=c),r[u]):t}function _(n,r,o){var s,l="";return dt&e(r)?l=r:r&&(l=Ht),s=t(n.sort(Ft),b).join("|"),[d("^("+s+")"+l,o?"i":""),1]}function q(t,n,r,o){var s=e(n);if(gt===s)return n;if(o[t])return o[t];r=r||0;var l,a=0;return n&&n.isCharList&&(a=1,u(n,"isCharList")),l=ht===s?new P(ve,t,n,ht,r):vt===s?new P(ve,t,n,vt,r):Rt&s?new P(ve,t,n,Ot,r):dt&s?new P(ve,t,n,a?xt:dt,r):n,o[t]=l}function O(t,n,r,o,s,a,u,c){if(u[t])return u[t];var p,f,m,k,h,g,$,y=0,b=0,d=1,v=dt&e(o)?!0:!!o;if(p=l(n),m=p.length,1===m)$=q(t,w(p[0],r,a,o),0,u);else if(m>1){for(k=(m>>>1)+1,f=0;k>=f;f++)h=e(p[f]),g=e(p[m-1-f]),vt===h&&vt===g||(d=0),wt&h||wt&g?y=1:(Ot&h||Ot&g||i(p[f],r)||i(p[m-1-f],r))&&(b=1);if(d&&!v)p=p.slice().join(""),p.isCharList=1,$=q(t,p,0,u);else if(!v||y||b)if(y||b){for(f=0;m>f;f++)wt&e(p[f])?p[f]=O(t+"_"+f,p[f],r,o,s,a,u):p[f]=q(t+"_"+f,w(p[f],r,a),f,u);$=m>1?new P(xe,t,p):p[0]}else{for(c&&(c.keywords=l(n).slice()),p=p.sort(Ft),f=0;m>f;f++)p[f]=q(t+"_"+f,w(p[f],r,a),f,u);$=m>1?new P(xe,t,p):p[0]}else c&&(c.keywords=l(n).slice()),$=q(t,_(p,o,s),0,u)}return u[t]=$}function E(t,n,o,s,l){if(l[t])return l[t];var u=a(n),c=[],p=[];return r(function(n){var r,a,f,m;r=q(t+"_0_"+n,w(u[n][0],o,s),n,l),u[n].length>1?(f=i(u[n][1],o),m=f&&Bt.test(u[n][1]),Ot!==r.ptype||dt!==e(u[n][1])||!m&&f?a=q(t+"_1_"+n,w(u[n][1],o,s),n,l):m?(a=new String(u[n][1]),a.regex_pattern=o):a=u[n][1]):a=r,c.push(r),p.push(a)},0,u.length-1),l[t]=new P(we,t,[c,p])}function S(e,t){var n=a(e.tokens.slice());r(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],s=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,s]))},0,n.length-1)}function L(e,n,r,o){var s=e.meta||r,l=!(!e.caseInsesitive&&!e.ci),a=t(n,function(e){return{word:e,meta:s,ci:l}});return o.autocomplete=(o.autocomplete||[]).concat(a),a}function R(t){t.Lex||(t.Lex={}),t.Syntax||(t.Syntax={});var n,r,o,l,a,i,c,p,f,m,k,h=t.Lex,g=t.Syntax,$=[h,g],y=$.length;for(k=0;y>k;){m=$[k++];for(o in m)m[rt](o)&&(n=o.split(":"),r=n[1]&&Mt(n[1]).length?Mt(n[1]):null,n=Mt(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],u(m,o),r&&(r=r[ct](),l=m[n],a=e(l),_t===a?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=l):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=l):"action"===r&&dt===a?m[n][l]=!0:m[n].tokens=l))),h===m&&(jt&e(m[n])&&(m[n]={type:"simple",tokens:m[n]}),l=m[n],l.type&&(p=l.type=l.type[ct](),"line-block"===p?(l.type="block",l.multiline=!1,l.escape=!1):"escaped-line-block"===p?(l.type="block",l.multiline=!1,l.escape="\\"):"escaped-block"===p&&(l.type="block",l.multiline=!0,l.escape="\\"))))}m=h;for(n in m)if(m[rt](n))for(l=m[n];l.extend;)i=l.extend,u(l,"extend"),c=h[i],c&&(jt&e(c)&&(c=h[i]={type:"simple",tokens:c}),l=s(c,l));m=h;for(n in m)m[rt](n)&&(l=m[n],l.type?(p=l.type=l.type[ct](),"line-block"===p?(l.type="block",l.multiline=!1,l.escape=!1):"escaped-line-block"===p?(l.type="block",l.multiline=!1,l.escape="\\"):"escaped-block"===p&&(l.type="block",l.multiline=!0,l.escape="\\")):l["escaped-line-block"]?(l.type="block",l.multiline=!1,l.escape||(l.escape="\\"),l.tokens=l["escaped-line-block"],u(l,"escaped-line-block")):l["escaped-block"]?(l.type="block",l.multiline=!0,l.escape||(l.escape="\\"),l.tokens=l["escaped-block"],u(l,"escaped-block")):l["line-block"]?(l.type="block",l.multiline=!1,l.escape=!1,l.tokens=l["line-block"],u(l,"line-block")):l.comment?(l.type="comment",l.escape=!1,l.tokens=l.comment,u(l,"comment")):l.block?(l.type="block",l.tokens=l.block,u(l,"block")):l.simple?(l.type="simple",l.tokens=l.simple,u(l,"simple")):l.nop?(l.type="action",l.action=["nop",l.nop,!1],l.nop=!0):l.error?(l.type="action",l.action=["error",l.error,!!l["in-context"]],u(l,"error")):l[rt]("context")?(l.type="action",l.action=[l.context?"context-start":"context-end",l.context,!!l["in-context"]],u(l,"context")):l.indent?(l.type="action",l.action=["indent",l.indent,!!l["in-context"]],u(l,"indent")):l.outdent?(l.type="action",l.action=["outdent",l.outdent,!!l["in-context"]],u(l,"outdent")):l.unique?(l.type="action",l.action=["unique",dt&e(l.unique)?["_DEFAULT_",l.unique]:l.unique,!!l["in-context"]],u(l,"unique")):l.push?(l.type="action",l.action=["push",l.push,!!l["in-context"]],u(l,"push")):l[rt]("pop")?(l.type="action",l.action=["pop",l.pop,!!l["in-context"]],u(l,"pop")):l.type="simple","action"===l.type?l.ci=!(!l.caseInsesitive&&!l.ci):"block"===l.type||"comment"===l.type?(l.multiline=l[rt]("multiline")?!!l.multiline:!0,dt&e(l.escape)||(l.escape=!1)):"simple"===l.type&&(l.meta=l.autocomplete&&dt&e(l.meta)?l.meta:null,l.ci=!(!l.caseInsesitive&&!l.ci)));m=g;for(n in m)m[rt](n)&&(l=m[n],_t!==e(l)||l.type?l.type&&(p=l.type=l.type[ct](),"group"===p&&l.match?(a=e(l.match),dt&a?(f=l.match[ct](),"alternation"===f||"either"===f?(l.type="alternation",u(l,"match")):"sequence"===f||"all"===f?(l.type="sequence",u(l,"match")):"zeroorone"===f?(l.type="zeroOrOne",u(l,"match")):"zeroormore"===f?(l.type="zeroOrMore",u(l,"match")):"oneormore"===f?(l.type="oneOrMore",u(l,"match")):(l.type="sequence",u(l,"match"))):wt&a&&(l.type="repeat",l.repeat=l.match,u(l,"match"))):"either"===p?l.type="alternation":"all"===p?l.type="sequence":"lookahead"===p?l.type="positiveLookahead":"grammar"===p&&(l.type="subgrammar"),"subgrammar"!==l.type||l.tokens||(l.tokens=n)):l.ngram||l["n-gram"]?(l.type="ngram",l.tokens=l.ngram||l["n-gram"],l["n-gram"]?u(l,"n-gram"):u(l,"ngram")):l.sequence||l.all?(l.type="sequence",l.tokens=l.sequence||l.all,l.all?u(l,"all"):u(l,"sequence")):l.alternation||l.either?(l.type="alternation",l.tokens=l.alternation||l.either,l.either?u(l,"either"):u(l,"alternation")):l.zeroOrOne?(l.type="zeroOrOne",l.tokens=l.zeroOrOne,u(l,"zeroOrOne")):l.zeroOrMore?(l.type="zeroOrMore",l.tokens=l.zeroOrMore,u(l,"zeroOrMore")):l.oneOrMore?(l.type="oneOrMore",l.tokens=l.oneOrMore,u(l,"oneOrMore")):l.positiveLookahead||l.lookahead?(l.type="positiveLookahead",l.tokens=l.positiveLookahead||l.lookahead,l.lookahead?u(l,"lookahead"):u(l,"positiveLookahead")):l.negativeLookahead?(l.type="negativeLookahead",l.tokens=l.negativeLookahead,u(l,"negativeLookahead")):(l.subgrammar||l.grammar)&&(l.type="subgrammar",l.tokens=l.subgrammar||l.grammar,l.subgrammar?u(l,"subgrammar"):u(l,"grammar")));return t}function j(t,n,r){if(r=r||{},n=n||[],!t||!t.length)return n;var o,s,l,a,i,u,c;for(o=0,s=t.length;s>o;o++)if(i=t[o])if(je===i.type)if(i.autocompletions)for(l=0,a=i.autocompletions.length;a>l;l++)c=i.autocompletions[l],r[rt]("w_"+c.word)||(n.push(c),r["w_"+c.word]=1);else dt===i.token.ptype&&dt&e(i.token.pattern)&&i.token.pattern.length>1&&(r[rt]("w_"+i.token.pattern)||(n.push({word:""+i.token.pattern,meta:i.name,ci:!!i.ci}),r["w_"+i.token.pattern]=1));else if(Me===i.type)j(i.token,n,r);else if(Ue&i.type){l=0,a=i.token.length;do j([u=i.token[l++]],n,r);while(a>l&&(Ne&u.type&&1>u.min||_e===u.type))}else Ne&i.type&&j([i.token[0]],n,r);return n}function D(t,n,r,o){for(var s;dt&e(s=n[t]||r[t]);)t=s;return o?t:n[t]||r[t]||t}function I(e,t){return e.length>1?r(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];Ut.test(o)&&Ut.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function M(n,r,s){var l,a,i,u,c,p,f,m,k,h,g,$,y,x,w,_=!1;if(w=n.modifier?n.modifier:null,m=new String(Mt(n)),m.pos=0,1===m.length)$=""+n,r[$]||s[$]||(r[$]={type:"simple",tokens:n}),n=$;else{for(l=[],a=[],i="",y=[];m.pos<m.length;)if(k=m[pt](m.pos++),Gt.test(k))if(i.length&&(_?(a.length&&(g=a[a.length-1],$=g+"."+i,p=r[$]||s[$],p||(f=D(g,r,s),s[$]=dt&e(f)?new String(f):o(f),s[$].modifier=i),a[a.length-1]=$),_=!1):"0"===i?(r[Ze]||(r[Ze]={type:"simple",tokens:0}),a.push(Ze)):"^^"===i?(r[Ve]||(r[Ve]={type:"simple",tokens:qe}),a.push(Ve)):"^^1"===i?(r[We]||(r[We]={type:"simple",tokens:Oe}),a.push(We)):"^"===i?(r[Je]||(r[Je]={type:"simple",tokens:Se}),a.push(Je)):"$"===i?(r[Qe]||(r[Qe]={type:"simple",tokens:Ee}),a.push(Qe)):(r[i]||s[i]||(r[i]={type:"simple",tokens:i}),a.push(i)),i=""),"."===k)a.length&&m.pos<m.length&&!Gt.test(m[pt](m.pos))?_=!0:i+=k;else if('"'===k||"'"===k)u=v(m,k,"\\",!0),u.length?($=""+u,r[$]||(r[$]={type:"simple",tokens:u}),a.push($)):(r[et]||(r[et]={type:"simple",tokens:""}),a.push(et));else if("["===k)u=v(m,"]","\\",!0),$="["+u+"]",r[$]||(r[$]={type:"simple",tokens:d("^(["+("^"===u[pt](0)?"^"+b(u.slice(1)):b(u))+"])")}),a.push($);else{if("]"===k){i+=k;continue}if("/"===k)u=v(m,k,"\\",!1),h="",u.length&&(m.pos<m.length&&"i"===m[pt](m.pos)&&(m.pos++,h="i"),$="/"+u+"/"+h,r[$]||(r[$]={type:"simple",tokens:d("^("+u+")",h)}),a.push($));else if("*"===k||"+"===k||"?"===k)a.length?(g=a[a.length-1],$=""+g+k,s[$]||(s[$]={type:"*"===k?"zeroOrMore":"+"===k?"oneOrMore":"zeroOrOne",tokens:[g]}),a[a.length-1]=$):i+=k;else if("{"===k)a.length?(c=v(m,"}",!1),c=t(c.split(","),Mt),c[0].length?c[0]=parseInt(c[0],10)||0:c[0]=0,0>c[0]&&(c[0]=0),2>c.length?c.push(c[0]):c[1].length?c[1]=parseInt(c[1],10)||ft:c[1]=ft,0>c[1]&&(c[1]=0),g=a[a.length-1],$=""+g+["{",c[0],",",isFinite(c[1])?c[1]:"","}"].join(""),s[$]||(s[$]={type:"repeat",repeat:[c[0],c[1]],tokens:[g]}),a[a.length-1]=$):i+=k;else{if("}"===k){i+=k;continue}"&"===k||"!"===k?a.length?(g=a[a.length-1],$=""+g+k,s[$]||(s[$]={type:"!"===k?"negativeLookahead":"positiveLookahead",tokens:[g]}),a[a.length-1]=$):i+=k:"|"===k?(_=!1,a=I(a),a.length>1?($=""+a.join(" "),s[$]||(s[$]={type:"sequence",tokens:a}),l.push($)):a.length?l.push(a[0]):i+=k,a=[]):"("===k?(y.push([a,l,i]),a=[],l=[],i=""):")"===k&&(a=I(a),a.length>1?($=""+a.join(" "),s[$]||(s[$]={type:"sequence",tokens:a}),l.push($)):a.length&&l.push(a[0]),a=[],l=I(l,1),l.length>1?($=""+l.join(" | "),s[$]||(s[$]={type:"alternation",tokens:l})):l.length&&($=l[0]),l=[],x=y.pop(),a=x[0],l=x[1],i=x[2],g=$,$="("+g+")",s[$]||(s[$]=o(D(g,r,s))),a.push($))}}else i+=k;i.length&&(_?(a.length&&(g=a[a.length-1],$=g+"."+i,p=r[$]||s[$],p||(f=D(g,r,s),s[$]=dt&e(f)?new String(f):o(f),s[$].modifier=i),a[a.length-1]=$),_=!1):"0"===i?(r[Ze]||(r[Ze]={type:"simple",tokens:0}),a.push(Ze)):"^^"===i?(r[Ve]||(r[Ve]={type:"simple",tokens:qe}),a.push(Ve)):"^^1"===i?(r[We]||(r[We]={type:"simple",tokens:Oe}),a.push(We)):"^"===i?(r[Je]||(r[Je]={type:"simple",tokens:Se}),a.push(Je)):"$"===i?(r[Qe]||(r[Qe]={type:"simple",tokens:Ee}),a.push(Qe)):(r[i]||s[i]||(r[i]={type:"simple",tokens:i}),a.push(i))),i="",a=I(a),a.length>1?($=""+a.join(" "),s[$]||(s[$]={type:"sequence",tokens:a}),l.push($)):a.length&&l.push(a[0]),a=[],l=I(l,1),l.length>1?($=""+l.join(" | "),s[$]||(s[$]={type:"alternation",tokens:l}),n=$):l.length&&(n=l[0]),l=[]}return w&&(r[n]||s[n])&&((r[n]||s[n]).modifier=w),n}function F(o,s,i,u,c,p,f,m,k,h,g){var $,y,b,d,v,x,w,_=null,q=null,R=null;if(qe===o||Oe===o||Se===o||Ee===o)return new C(o,qe===o?Ve:Oe===o?$T_FBNL$:Se===o?Je:Qe,o,q);if(!1===o||0===o)return new C(Le,Ze,0,q);if(""===o)return new C(Re,et,"",q);if(null===o)return new C(je,Xe,ht,q,R);if(wt&e(o)&&(b=o,o="NGRAM_"+b.join("_"),u[o]||(u[o]={type:"ngram",tokens:b})),o=""+o,m[o])return m[o];if(v=D(o,i,u),dt&e(v)&&(v=M(v,i,u),v=i[v]||u[v]||null),!v)return null;if($=v.type?Ke[v.type[ct]().replace(zt,"")]||je:je,q=v.msg||null,R=v.modifier||null,y=v.tokens,je&$){if(qe===y||Oe===y||Se===y||Ee===y||!1===y||0===y)return _=new C(y||Le,o,y||0,q),m[o]=_,_;if(""===y)return _=new C(Re,o,"",q),m[o]=_,_;if(null===y)return _=new C(je,o,ht,q,R),m[o]=_,_;if(!y)return null}if(_e&$)v[rt]("action")?"nop"===v.action[0]?v.action[0]=fe:"error"===v.action[0]?v.action[0]=me:"context-start"===v.action[0]?v.action[0]=he:"context-end"===v.action[0]?v.action[0]=ge:"push"===v.action[0]?v.action[0]=$e:"pop"===v.action[0]?v.action[0]=ye:"unique"===v.action[0]?v.action[0]=ke:"indent"===v.action[0]?v.action[0]=be:"outdent"===v.action[0]&&(v.action[0]=de):v[rt]("nop")?v.action=[fe,v.nop,!!v["in-context"]]:v[rt]("error")?v.action=[me,v.error,!!v["in-context"]]:v[rt]("context")?v.action=[v.context?he:ge,v.context,!!v["in-context"]]:v[rt]("context-start")?v.action=[he,v["context-start"],!!v["in-context"]]:v[rt]("context-end")?v.action=[ge,v["context-end"],!!v["in-context"]]:v[rt]("push")?v.action=[$e,v.push,!!v["in-context"]]:v[rt]("pop")?v.action=[ye,v.pop,!!v["in-context"]]:v[rt]("unique")?v.action=[ke,dt&e(v.unique)?["_DEFAULT_",v.unique]:v.unique,!!v["in-context"]]:v[rt]("indent")?v.action=[be,v.indent,!!v["in-context"]]:v[rt]("outdent")&&(v.action=[de,v.outdent,!!v["in-context"]]),v.nop&&(v.action[0]=fe),_=new C(_e,o,v.action.slice(),q,R),_.ci=!!v.caseInsensitive||v.ci,m[o]=_;else if(y=l(y),je&$){w=v.autocomplete?L(v,Lt&e(v.autocomplete)?l(v.autocomplete):y,o,g):null;var j={};if(x="undefined"!=typeof v.combine?v.combine:!!(wt&e(v.tokens)),_=new C(je,o,O(o,y.slice(),s,x,!(!v.caseInsensitive&&!v.ci),p,f,j),q,R,null,w),j.keywords&&(_.keywords=j.keywords.join("|")),m[o]=_,null!=v.except){var I,N,z=l(v.except),P=z.length,T=[];for(I=0;P>I;I++)z[I]&&(N=F(z[I],s,i,u,c,p,f,m,k,h,g),N&&T.push(N));T.length&&(_.except=T)}}else De&$?(Ie===$&&S(v,h),_=new C($,o,E(o,y.slice(),s,p,f),q),_.empty=v[rt]("empty")?!!v.empty:!0,_.mline=v[rt]("multiline")?!!v.multiline:!0,_.esc=v[rt]("escape")?v.escape:!1,_.inter=!!c[o+".inside"],Ie===$&&v.interleave&&k.push(H(_)),R&&(_.modifier=R),m[o]=_):Ye&$&&(Be===$?m[o]=new C(Be,o,y,q,R):He===$?(d=a(y),_=t(d,function(e,t){return new C(He,o+"_NGRAM_"+t,null,q,R)}),m[o]=_,r(function(e){_[e].token=l(n(d[e],function(e,t){return e.concat(F(t,s,i,u,c,p,f,m,k,h,g))},[]))},0,d.length-1)):(Ce===$||Ge===$?_=new C($,o,null,q,R):Ne&$&&wt&e(v.repeat)?(_=new C(Ne,o,null,q,R),_.min=v.repeat[0],_.max=v.repeat[1]):ze===$?(_=new C(ze,o,null,q,R),_.min=0,_.max=1):Pe===$?(_=new C(Pe,o,null,q,R),_.min=0,_.max=ft):Te===$?(_=new C(Te,o,null,q,R),_.min=1,_.max=ft):_=Me===$?new C(Me,o,null,q,R):new C(Fe,o,null,q,R),m[o]=_,_.token=l(n(y,function(e,t){return e.concat(F(t,s,i,u,c,p,f,m,k,h,g))},[]))));return m[o]}function N(t){var n={};return t.Lex=t.Lex||{},t.Syntax=t.Syntax||{},t=R(t),t.Parser&&t.Parser.length&&r(function o(s,l){var a,i,u,c=l[s];n[c]||(wt&e(c)&&(a=c,c="NGRAM_"+a.join("_"),t.Syntax[c]||(t.Syntax[c]={type:"ngram",tokens:a})),i=D(c,t.Lex,t.Syntax),dt&e(i)&&(i=M(i,t.Lex,t.Syntax),i=t.Lex[i]||t.Syntax[i]||null),i&&(n[c]=i,u=i.type?Ke[i.type[ct]().replace(zt,"")]||je:je,Ye&u&&r(o,0,i.tokens.length-1,i.tokens)))},0,t.Parser.length-1,t.Parser),t}function z(t){var r,s,l,a,i,u,c,p,f,m,k,h,g,$;return t.__parsed?t:(r=t.RegExpID||null,l=t.Extra?o(t.Extra):{},a=t.Style?o(t.Style):{},i=null,u=null,c=t.Lex?o(t.Lex):{},p=t.Syntax?o(t.Syntax):{},f={},m={},k={},g={},$={},h=[],s=t.Parser?o(t.Parser):[],t=R({Style:a,Fold:i,Match:u,Lex:c,Syntax:p,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:l,__parsed:0}),t.$parser=n(s,function(t,n){var o=F(n,r,c,p,a,f,m,k,h,g,$)||null;return o&&(wt&e(o)?t=t.concat(o):t.push(o)),t},[]),t.$interleaved=h&&h.length?h:null,t.$comments=g,t.$autocomplete=$&&$.autocomplete&&$.autocomplete.length?$.autocomplete:null,t.__parsed=1,t)}function P(t,n,r,o,s){var l,a,i=this;l=i.type=t,i.name=n,i.pattern=r,a=i.ptype=o||dt,i.key=s||0,xe===l?i.key=!1!==s:we===l?i.pattern[0]=new P(xe,n+"_Start",r[0],null,!1):ht===a?i.pattern=null:Ot===a&&(i.pattern=Ot&e(r)?[r,0]:[r[0],r[1]||0])}function T(t,n,r,o){var s,l,a,i,u,c,p,f,m,k,h,g=t,$=g.type,y=g.pattern,b=g.key;if(we===$){if(s=g.name,a=y[0],i=y[1],c=T(a,n,r,o))return u=i[c[0]],f=e(u),m=a.pattern[c[0]].ptype,Ot===m&&St&f&&(u.regex_pattern?(p=x(u,c[1],0,1),u=new P(ve,s+"_End",w(p,u.regex_pattern,{}),Ot)):(p=gt&f?c[1][u+1]:x(u,c[1]),u=new P(ve,s+"_End",p,p.length>1?dt:vt))),u}else if(xe===$){for(k=0,h=y.length;h>k;k++)if(p=T(y[k],n,r,o))return b?[k,p[1]]:p}else{if(l=g.ptype,ht===l)return!1!==r&&n.end(),[b,""];if(Ot===l){if(p=n.slice(n.pos).match(y[0]),p&&0===p.index)return!1!==r&&n.mov(p[y[1]||0].length),[b,y[1]>0?p[y[1]]:p]}else if(xt===l){if(!0===o){p=-1;var d,v;for(h=y.length-1;h>=0;h--)d=n.indexOf(y[pt](h),n.pos),d>-1&&(-1===p||p>d)&&(p=d,v=y[pt](h));if(p>-1)return!1!==r&&(n.pos=p+1),[b,v]}else if(p=n[pt](n.pos)||null,p&&-1<y.indexOf(p))return!1!==r&&n.mov(1),[b,p]}else if(vt===l){if(!0===o){if(p=n.indexOf(y,n.pos),p>-1)return!1!==r&&(n.pos=p+1),[b,y]}else if(p=n[pt](n.pos)||null,y===p)return!1!==r&&n.mov(1),[b,p]}else if(dt===l)if(h=y.length,!0===o){if(p=n.indexOf(y,n.pos),p>-1)return!1!==r&&(n.pos=p+h),[b,y]}else if(y===n.substr(n.pos,h))return!1!==r&&n.mov(h),[b,y]}return!1}function A(e,t){this.val=e||null,t?this.prev=t:this.prev=null}function C(e,t,n,r,o,s,l,a){var i=this;i.type=e,i.name=t,i.token=n,i.modifier=o||null,i.except=s||null,i.autocompletions=l||null,i.keywords=a||null,i.pos=null,i.msg=r||null,i.$msg=null,i.status=0,i.empty=!1,i.ci=!1,i.mline=!0,i.esc=!1,i.inter=!1,i.found=0,i.min=0,i.max=1,i.i0=0,i.$id=null}function G(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null}function H(e,t,n,r){var o=new C(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=ae),n&&(o.modifier=n),r&&(o.$id=r),o}function B(e){var t=e.name;return e.$msg?e.$msg:e.status&ae?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function U(e,t,n,r,o,s,l){e.status&se&&(e.err[""+t+"_"+n+"_"+r+"_"+o+"_"+(s?s.name:"ERROR")]=[t,n,r,o,l||B(s)])}function Y(e,t,n){if(e.stack===t)t=e.stack=new A(n,e.stack);else{for(var r=e.stack;r&&r.prev!==t;)r=r.prev;t=new A(n,t),r&&(r.prev=t)}return t}function K(e,t,n,r){var o,s,l,a,i,u=1/0,c=null,p=1/0;if(s=t.pos,t.spc(),l=t.pos,o=e.stack,t.pos<t.length){for(i=0;o&&(a=o.val,a.$id===r.$id);){for(;!(V(a,t,e,n)||(t.pos=a.pos>t.pos?a.pos:t.pos+1,e.stack=o,t.pos>=t.length)););e.stack=o,t.pos<t.length&&u>t.pos?(u=t.pos,c=o,p=i):u===t.pos&&p>i&&(u=t.pos,c=o,p=i),t.pos=l,o=o.prev,i++}u<t.length?(t.pos=u,e.stack=c):t.end()}return l>=s&&t.pos===l}function V(e,t,n,r){if(!e)return!1;var o=e.type,s=Ye&o?X:De&o?Q:_e&o?W:J;return s(e,t,n,r)}function W(t,n,r,o){var s,l,a,i,u,c,p,f,m,k,h,g,$,y,b,d=t,v=d.token||null,w=d.ci,_=d.name,q=!(r.status&se);if(d.status=0,d.$msg=null,q||!v||!o||!o.pos)return!0;if(b=!!(De&o.T),fe===v[0]||b&&!o.block)return!0;if(s=v[0],l=v[1],g=v[2],u=d.msg,b?(y=o.block.match||o.block.str,f=o.block.pos[0][0],m=o.block.pos[0][1],k=o.block.pos[0][2],h=o.block.pos[0][3]):(y=o.match||o.str,f=o.pos[0],m=o.pos[1],k=o.pos[2],h=o.pos[3]),me===s)return!u&&dt&e(l)&&(u=l),d.$msg=u?x(u,y,!0):'Error "'+_+'"',U(r,f,m,k,h,d,B(d)),d.status|=ie,!1;if(ge===s)r.ctx=r.ctx?r.ctx.prev:null;else if(he===s)r.ctx=new A({symb:{},queu:null},r.ctx);else if(ye===s){if(g){if(!r.ctx)return!0;c=r.ctx.val.queu}else c=r.queu;if(l){if(l=x(l,y),w&&(l=l[ct]()),!c||l!==c.val[0])return c?(d.$msg=u?x(u,[c.val[0],l],!0):'Tokens do not match "'+c.val[0]+'","'+l+'"',$=B(d),U(r,c.val[1],c.val[2],c.val[3],c.val[4],d,$),U(r,f,m,k,h,d,$),c=c.prev):(d.$msg=u?x(u,["",l],!0):'Token does not match "'+l+'"',$=B(d),U(r,f,m,k,h,d,$)),d.status|=ie,g?r.ctx&&(r.ctx.val.queu=c):r.queu=c,!1;c=c?c.prev:null}else c=c?c.prev:null;g?r.ctx&&(r.ctx.val.queu=c):r.queu=c}else if($e===s&&l){if(g){if(!r.ctx)return!0;c=r.ctx.val.queu}else c=r.queu;l=x(l,y),w&&(l=l[ct]()),d.$msg=u?x(u,l,!0):'Token does not match "'+l+'"',c=new A([l,f,m,k,h,B(d)],c),g?r.ctx&&(r.ctx.val.queu=c):r.queu=c}else if(ke===s){if(g){if(!r.ctx)return!0;p=r.ctx.val.symb}else p=r.symb;if(a=l[1],i=l[0],a=x(a,y,!0),w&&(a=a[ct]()),p[rt](i)||(p[i]={}),p[i][rt](a))return d.$msg=u?x(u,a,!0):'Duplicate "'+a+'"',$=B(d),U(r,p[i][a][0],p[i][a][1],p[i][a][2],p[i][a][3],d,$),U(r,f,m,k,h,d,$),d.status|=ie,!1;p[i][a]=[f,m,k,h]}return!0}function J(e,t,n,r,o){var s,l,a=e,i=a.token,u=a.modifier,c=a.type,p=a.name,f=a.except,m=n.line,k=t.pos,h=null,g=!1;if(a.status&=ce,a.$msg=o?null:a.msg||null,a.pos=t.pos,f&&!o){l=ee(n,t);for(var $=0,y=f.length;y>$;$++)if(s=f[$],a!==s&&je===s.type&&J(s,t,n,r,1))return a.pos=s.pos,ee(n,t,l),!1}return qe===c?g=0===n.line:Oe===c?g=n.bline+1===n.line:Se===c?g=t.sol():Ee===c?(t.spc(),t.eol()?g=p:(a.pos=t.pos,t.bck(k))):Le===c?(a.status=0,g=!0):Re===c?(a.status&ae&&t.spc()&&!t.eol()?(a.pos=t.pos,t.bck(k),a.status|=ie):g=!0,a.status&=ue):ht===i?(t.end(),g=u||p):(h=T(i,t))&&(h=h[1],g=u||p),o?g:(!1!==g&&(r.T=c,r.id=p,r.type=g,r.str=t.sel(k,t.pos),r.match=h,r.pos=[m,k,m,t.pos]),!g&&a.status&&a.$msg&&(a.$msg=x(a.$msg,p,!0)),g)}function Q(e,t,n,r){var o,s,l,a,i,u,c,p,f,m,k,h,g,$,y,b,d,v,w,_,q,O,E=e,S=E.name,L=E.type,R=E.modifier,j=E.token,D=E.mline,I=E.inter,M=I?S+".inside":S,F=E.esc,N=!!F,z="",P="",A="",C="",G=E.$id||S,B=n.outer,U=B&&B[2],K=B&&B[1];if(E.status&=ce,E.$msg=E.msg||null,E.pos=t.pos,_=n.line,q=t.pos,Ie===L&&(E.status&=ue),y=E.status&ae,l=0,a=0,n.block&&n.block.name===S?(a=1,l=1,$=M,o=n.block.end,p=n.block.sp,m=n.block.ip,f=n.block.ep,z=n.block.s,P=n.block.i):!n.block&&(o=T(j,t))&&(a=1,$=S,d=t.pos,p=[_,q],m=[[_,d],[_,d]],f=[_,d],z=t.sel(q,d),P="",C="",n.block={name:S,end:o,sp:p,ip:m,ep:f,s:z,i:P,e:C}),a){if(w=n.stack,s=ht===o.ptype,b=s||E.empty,I){if(s&&l&&t.sol())return E.status&=ue,n.block=null,!1;if(!l)return d=t.pos,r.T=L,r.id=S,r.type=R||$,r.str=t.sel(q,d),r.match=null,r.pos=[_,q,_,d],Y(n,w,H(E,y,0,G)),R||$}if(d=t.pos,i=K?s&&t.eol():T(o,t),c=D,u=0,i)$=s?M:S,C=t.sel(d,t.pos);else if(v=t.pos,h=!1,K||N||xt!==o.ptype&&vt!==o.ptype&&dt!==o.ptype){for(;!t.eol();){if(K){if(V(K,t,U,r)){if(t.pos>v){s&&(i=1);break}return!0}if(s){g=t.nxt(1),A+=g;continue}}if(d=t.pos,!h&&T(o,t)){I&&t.pos>d&&d>v?($=M,t.bck(d),u=1):($=S,i=1),C=t.sel(d,t.pos);break}g=t.nxt(1),A+=g,h=N&&!h&&F===g,d=t.pos}s&&t.eol()&&(i=1)}else(O=T(o,t,!0,!0))?I&&t.pos>d+O[1].length?($=M,t.mov(-O[1].length),u=1,A=t.sel(d,t.pos)):($=S,i=1,A=t.sel(d,t.pos-O[1].length),C=O[1]):(t.end(),$=M,u=1,A=t.sel(d,t.pos));return c=D||N&&h,P+=A,m[1]=[_,d],f=[_,t.pos],i&&!b&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(i||!c&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=P,n.block.e=C,Y(n,w,H(E,y,0,G))),r.T=L,r.id=S,r.type=R||$,r.str=t.sel(q,t.pos),r.match=null,r.pos=[_,q,f[0],f[1]],E.pos=t.pos,n.block||(k=z+P+C,r.block={str:k,match:[k,P,z,C],part:[k,z,P,C],pos:[[p[0],p[1],f[0],f[1]],[p[0],p[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),R||$)}return E.status&&E.$msg&&(E.$msg=x(E.$msg,S,!0)),!1}function X(e,t,n,r){var o,s,l,a,i,u,p,f,m,k,h,g,$,y,b,d=e,v=d.type,x=(d.name,d.token),w=x.length,_=d.modifier;if(d.status&=ce,d.$msg=d.msg||null,f=t.pos,m=n.stack,d.pos=t.pos,u=0,p=0,Be===v){d.status&=ce;var q=new String(x[0]),O=n.stack?n.stack.val:null;return q.subgrammar=1,q.next=O?new C(Ce,O.name,[O]):null,q.required=O?O.status&ae:0,q}if(Me===v){for($=c(),d.status|=ae,g=[],b=ee(n,t),h=0,k=h;w>k;k++){if(o=H(x[k],1,_,$),s=V(o,t,n,r),d.pos=o.pos,o.status&ae&&(u++,g.push(B(o))),!1!==s)return s;o.status&ie&&(p++,ee(n,t,b))}return u>0?d.status|=ae:d.status&=ue,w===p&&u>0?d.status|=ie:d.status&=ce,d.status&&!d.$msg&&g.length&&(d.$msg=g.join(" | ")),!1}if(Ue&v){y=!!(v&Fe),$=d.$id||c(),y?d.status|=ae:d.status&=ue,b=ee(n,t),h=0;do o=H(x[h++],y,_,$),s=V(o,t,n,r);while(w>h&&(!0===s&&Ae&o.type||!1===s&&!(o.status&ae)));if(d.pos=o.pos,!1!==s){if(!0!==s||Le!==o.type)for(k=w-1;k>=h;k--)m=Y(n,m,H(x[k],1,_,$));return s.subgrammar&&w>h&&(s.next=new C(Ce,x[h].name,[x[h]]),s.required=x[h].status&ae),s}return o.status&ie?(y?d.status|=ie:d.status&=ce,ee(n,t,b)):y&&o.status&ae&&(d.status|=ie),d.status&&!d.$msg&&(d.$msg=B(o)),!1}if(Ae&v)return Be&x[0].type?!0:(b=ee(n,t,null,!1),s=V(H(x[0],0),t,n,r),ee(n,t,b),Ge===v?!1===s:!1!==s);for($=d.$id||c(),l=d.found,a=d.min,i=d.max,d.status=0,g=[],b=ee(n,t),k=0;w>k;k++){if(o=H(x[k],1,_,$),s=V(o,t,n,r),d.pos=o.pos,!1!==s){if(++l,i>=l)return d.found=l,Y(n,m,H(d,0,0,c())),d.found=0,s;break}o.status&ae&&(u++,g.push(B(o))),o.status&ie&&ee(n,t,b)}return a>l&&(d.status|=ae),(l>i||a>l&&u>0)&&(d.status|=ie),d.status&&!d.$msg&&g.length&&(d.$msg=g.join(" | ")),!1}function Z(e,t){var n=this;n.id=e?p("state"):"state",t instanceof Z?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=t.stack,n.token=t.token,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new Z(e,t.outer[2])]:null,n.status&se?(n.queu=t.queu,n.symb=t.symb,n.ctx=t.ctx,n.err=t.err):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=null,n.token=null,n.block=null,n.outer=null,n.status&se?(n.queu=[],n.symb={},n.ctx=null,n.err={}):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=!0,n.$blank$=!0),n.toString=function(){return n.id+"_"+n.line+"_"+n.bline+"_"+(n.block?n.block.name:"0")}}function ee(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack=n[3],t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack,t?t.pos:1/0],!1===r&&(e.status=0),n)}function te(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.err=null}function ne(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?it(0,r.pos+e):ut(r.length,r.pos+e),r},r.bck=function(e){return r.pos=it(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,s="";if(!0===e){for(t=t||ne.$NONSPC$;r.pos<r.length&&t.test(n=r[pt](r.pos++));)s+=n;return s.length?s:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)s+=r[pt](r.pos++);return s},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||ne.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function re(e,n){var o=function(e){return new n.Match(e.token,e.pos,e.type)},s=n.Highlighter,l=m(s,{constructor:function(){var e=this;s.call(e)},findMatches:function(e,n){var s=l.escapeHtml;s&&(n=y(n));var a=l.$parser.parse(n,oe|se|le).tokens;if(s){var i=0;r(function(e,t){var n=t[e];n.pos=i,n.token=$(n.token,1),i+=n.token.length},0,a.length-1,a)}return t(a,o)}});return l.$id=p("syntaxhighlighter_grammar_brush"),l.$parser=new Vt.Parser(z(e)),l.escapeHtml=!0,l.submode=function(e,t){l.$parser.subparser(e,t.$parser)},l.dispose=function(){l.$parser&&l.$parser.dispose(),l.$parser=null},l}var oe=1,se=2,le=32,ae=4,ie=8,ue=~ae,ce=~ie,pe=ae|ie,fe=0,me=4,ke=8,he=16,ge=17,$e=32,ye=33,be=128,de=129,ve=2,xe=4,we=8,_e=4,qe=8,Oe=9,Ee=16,Se=32,Le=128,Re=256,je=512,De=1024,Ie=1025,Me=2048,Fe=4096,Ne=8192,ze=8193,Pe=8194,Te=8195,Ae=16384,Ce=Ae,Ge=16385,He=32768,Be=65536,Ue=Fe|He,Ye=Me|Fe|Ne|Ae|He|Be,Ke={
action:_e,simple:je,block:De,comment:Ie,subgrammar:Be,alternation:Me,sequence:Fe,repeat:Ne,zeroorone:ze,zeroormore:Pe,oneormore:Te,positivelookahead:Ce,negativelookahead:Ge,ngram:He},Ve="$|SOF|$",We="$|NONBLANK|$",Je="$|SOL|$",Qe="$|EOL|$",Xe="$|ENDLINE|$",Ze="$|EMPTY|$",et="$|NONSPACE|$",tt=void 0,nt="prototype",rt="hasOwnProperty",ot="propertyIsEnumerable",st=Object[nt],lt=st.toString,at=Object.create,it=Math.max,ut=Math.min,ct="toLowerCase",pt="charAt",ft=1/0,mt=4,kt=8,ht=16,gt=32,$t=33,yt=34,bt=64,dt=128,vt=129,xt=130,wt=256,_t=512,qt=1024,Ot=2048,Et=4096,St=dt|gt,Lt=dt|wt,Rt=Ot|wt,jt=dt|wt|Ot,Dt={"[object Number]":gt,"[object String]":dt,"[object Array]":wt,"[object RegExp]":Ot,"[object Date]":Et,"[object Function]":qt,"[object Object]":_t},It=/^\s+|\s+$/g,Mt=String[nt].trim?function(e){return e.trim()}:function(e){return e.replace(It,"")},Ft=function(e,t){return t.length-e.length},Nt=/\r\n|\r|\n/g,zt=/[\-_]/g,Pt=0,Tt=/([.*+?^${}()|[\]\/\\\-])/g,At=/[&"'<>]/g,Ct=/&(amp|lt|gt|apos|quot);/g,Gt=/^([.!&\[\]{}()*+?\/|'"]|\s)/,Ht="(\\s|\\W|$)",Bt=/(\\\\)*?\\\d/,Ut=/[*+]$/;ne.$SPC$=/^[\s\u00a0]+/,ne.$NONSPC$=/[^\s\u00a0]/,ne.$NOTEMPTY$=/\S/,ne.$SPACE$=/^\s*/;var Yt=m({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){var r,o,s,l,a,i,u,c,p,f,m,k,h,g,$,y,b,d=this,v=d.$grammar,x=v.Style,w=d.DEF,_=d.ERR,q={},O=d.$n$,E=d.$t$,S=d.$v$,L=v.$interleaved,R=v.$parser,j=R.length,D=L?L.length:0,I=t.outer,M=I&&I[2],F=I&&I[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,l=t.line,a=e.pos,f=!1,k=!0,m=!1,h=!1,I&&d===I[0]){if(q[O]=null,q[E]=w,q[S]=null,F){if(s=new G,V(F,e,M,s))return t.outer=null,{parser:d,state:M};for(e.nxt(1);!e.eol();){if(V(F,e,M,s)){if(e.pos>a)break;return t.outer=null,{parser:d,state:M}}e.nxt(1)}}else e.spc(),e.eol()?h=!0:e.end();return q[S]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(h||t.$eol$),q}if(t.stack&&Ee===t.stack.val.type&&e.sol()&&(t.stack=t.stack.prev),(!t.stack||Re!==t.stack.val.type&&null==t.block)&&e.spc()){if(t.stack&&Be===t.stack.val.type)return e.bck(a),r=t.stack.val,t.stack=t.stack.prev,f=V(r,e,t,s),g=""+f,d.$subgrammars[g]?($=d.$subgrammars[g],y=new Z(1,n[g]?n[g]:t.status),M=t):($=d,y=new Z,M=t),y.outer=[d,f.next,M],{parser:$,state:y,toInner:g};k=!1,h=!0}if(q[O]=null,q[E]=w,q[S]=null,k)for(s=new G,i=0;k&&(t.stack||j>i)&&!e.eol();){if(c=e.pos,p=t.stack,F){if(e.spc(),V(F,e,M,s))return e.pos>c?(q[S]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,q):(t.outer=null,{parser:I[0],state:M,fromInner:t});e.bck(c)}if(b=!1,D&&!t.block)for(u=0;D>u;u++)if(r=L[u],f=V(r,e,t,s),!1!==f){b=!0;break}if(k&&!b){if(!t.stack&&i>=j)break;t.stack?(r=t.stack.val,t.stack=t.stack.prev):r=R[i++],f=V(r,e,t,s)}if(!1===f){if(r.status&pe){t.token=r,h=K(t,e,s,r)||h,m=!0,k=!1;break}}else{if(f.subgrammar)return g=""+f,d.$subgrammars[g]?($=d.$subgrammars[g],y=new Z(1,n[g]?n[g]:t.status),M=t):($=d,y=new Z,M=t),y.outer=[d,f.next,M],{parser:$,state:y,toInner:g};if(t.stack&&t.stack.prev&&e.eol()&&De&t.stack.val.type&&t.block&&t.block.name===t.stack.val.name)for(u=t.stack.prev;u&&_e===u.val.type;)o=u,u=u.prev,W(o,e,t,s),o.status&ie&&(t.$actionerr$=!0);else if(t.stack&&_e===t.stack.val.type)for(;t.stack&&_e===t.stack.val.type;)o=t.stack.val,t.stack=t.stack.prev,W(o,e,t,s),o.status&ie&&(t.$actionerr$=!0);if(!0!==f){k=!1;break}}}return k&&e.nxt(1),q[S]=e.cur(1),!1!==f?(f=x[f]||w,q[O]=r.name):m?(f=_,t.status&se&&U(t,l,a,l,e.pos,r)):f=w,q[E]=f,t.$eol$=e.eol(),t.$blank$=t.$blank$&&(h||t.$eol$),q},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t,n){var r=[];if(e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)r.push(t.parser.get(e,t));return r},parse:function(e,t){var n,o,s,l,a,i,u=(e||"").split(Nt),c=u.length,p=null;if(t=t||oe,s=!!(t&se),l=!!(t&oe),o={parser:this,state:new Z(0,t),inner:{}},o.state.$full_parse$=!0,r(function(e){u[e]+="\n"},0,c-2),l?p=r(t&le?function(e,t){t._=t._.concat(o.parser.tokenize(ne(u[e]),o,e))}:function(e,t){t._.push(o.parser.tokenize(ne(u[e]),o,e))},0,c-1,{_:[]})._:r(function(e){var t=ne(u[e]);if(t.eol())o.state.line++,o.state.$blank$&&o.state.bline++;else for(;!t.eol();)o.parser.get(t,o)},0,c-1),n=o.state,s&&n.queu&&n.queu.length)for(;n.queu.length;)a=n.queu.shift(),U(n,a[1],a[2],a[3],a[4],null,a[5]);return i=l&&s?{tokens:p,errors:n.err}:l?p:n.err,te(n),o=n=null,i},autocompletion:function(e,t){var n,r,o=e.stack,s={},l=j([e.token],[],s);for(t=t||0;o;){if(n=o.val,r=n.type,Ne&r){if(l=j([n],l,s),0<n.min&&t<l.length)break}else if((je===r||Me===r||Ue&r)&&(l=j([n],l,s),t<l.length))break;o=o.prev}return l},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[rt](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),Kt=m(Yt,{constructor:function(e,t){var n=this;Yt.call(n,e,"plain","plain"),n.DEF=t||n.$DEF,n.ERR=n.$ERR},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.state.pos=n.fromInner.pos,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.pos=t.state.pos,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,n,r){var o,s=this,l=[],a=[],i=null,u=function(e){return e.type=s.$DEF,e};if(tt===n.state.pos&&(n.state.pos=0),e.eol())n.state.line++,n.state.$blank$&&n.state.bline++;else for(;!e.eol();)o=n.parser.get(e,n),o.pos=n.state.pos,n.state.pos+=o.token.length,n.state.$actionerr$?(a.length&&(l=l.concat(t(a,u))),o.type=s.$DEF,l.push(o),a.length=0,i=null):(i!==o.name&&(a.length&&(l=l.concat(a)),a.length=0,i=o.name),a.push(o));return a.length&&(l=l.concat(a)),a.length=0,i=null,l}}),Vt={VERSION:"4.0.0",clone:o,extend:s,pre_process:N,parse:z,getMode:re,Parser:Kt};return Vt});